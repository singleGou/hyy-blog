# 可迭代对象

可迭代（Iterable）是数组的泛化，凡是可以通过 for...of 循环遍历的对象都可以称作为可迭代对象

普通对象是无法通过 for...of 遍历的，如何把一个普通对象变为可迭代对象

```js
let range = {
  from: 1,
  to: 5, // 设置为 Infinity 将变成无穷迭代
};

range[Symbol.iterator] = function () {
  return {
    current: this.from,
    last: this.to,

    // next() 会在 for...of 的每一轮循环迭代中被调用
    next() {
      // 将返回 { done: ..., value: ... } 格式的对象（iterator)
      if (this.current <= this.last) {
        return { done: false, value: this.current++ };
      } else {
        return { done: true };
      }
    }
  };
};

for (let item of range) {
  console.log(item);
}
```

for...of 循环每次会调用一个 `next()` 方法，这个方法会返回一个迭代器 

## 内建可迭代对象

数组和字符串

```js
let str = 'hello world';

for (let char of str) {
  console.log(char);
}
```

字符串迭代器能够识别代理对（UTF-16 扩展字符）

## 可迭代和类数组

- 可迭代（iterable)：实现了 Symbol.iterator 方法的对象
- 类数组（array-like)：有索引和 length 属性的对象

```js
let arraylike = {
  0: 'hello',
  1: 'world',
  length: 2
};

let array = Array.from(arraylike);
console.log(array);
```

## Array.from

传入一个可迭代或类数组对象，返回一个新的数组

语法：

```js
// mapFn, thisArg 可选
Array.from(obj[， mapFn, thisArg])
```

可以提供一个映射函数 mapFn：

```js
let array = [1, 2, 3];
let newArray = Array.from(array, (x) => x * x);
console.log(newArray); // [1, 4, 9]
```

