# 解构赋值

解构赋值是一种特殊语法，只需要数组或对象的一部分

## 数组解构

忽略使用逗号的元素

```js
const [a, , c] = [1, 2, 3, 4, 5];

console.log(a, c); // 1, 3
```

等号右侧是任何可迭代对象

```js
const [a, , c] = new Set([1, 3, 1, 4]);

console.log(a, c); // 1, 4
```

赋值给等号左侧任何可以被赋值的内容

```js
let user = {};
[user.name, user.age] = ['Tom', 3];

console.log(user); // { name: 'Tom', age: 3 }
```

**技巧**：交换变量

```js
let a = 1;
let b = 2;
[a, b] = [b, a];

console.log(a, b); // 2 1
```

### 其余的 ...

如果数组比左边的列表长，那么其余的数组项会省略：

```js
let [a, b] = [1, 2, 3, 4, 5];

console.log(rest); // [1, 2]
```

如果想收集其余的数组项可以使用 '...' 加一个剩余参数来得到：

```js
// rest 的值就是数组中剩下元素组成的数组，需要在解构赋值的最后一个参数位置上
let [a, b, ...rest] = [1, 2, 3, 4, 5];

console.log(rest); // [3, 4, 5]
```

### 默认值

```js
let [a, b, c = 3] = [1, 2];

console.log(a, b, c); // 1 2 3
```



## 对象解构

```js
let obj = {
  width: 10,
  height: 8
};

let { width, height } = obj;

// : 设置别名，= 指定默认值
let { width: w, height: h = 1 } = obj;
console.log(w, h); // 10 8

// 剩余模式
let { width: w2, ...rest } = obj;
console.log(width, rest); // 10 { height: 8, longth: 7 }
```

> 不使用 let，使用已有的变量
>
> ```js
> let width, height;
> 
> // 会报错
> {width, height} = {width: 10, height: 8};
> ```
>
> 需要使用 `()` 告诉 js 这不是一个代码块
>
> ```js
> ({width, height} = {width: 10, height: 8});
> ```



## 嵌套解构

```js
let obj = {
  name: 'triangle',
  size: {
    width: 10,
    height: 8
  },
  items: ['width', 'height']
};

let {
  size: { width, height },
  items: [item1, item2],
  name = 'rectangle'
} = obj;

// size 和 items 没有对应的变量，因为取的是他们的内容
console.log(width, height, item1, item2, name); // 10 8 width height triangle
```



案例：找出工资最高的那个人

利用 `Object.entries` 遍历对象和解构语法

```js
let salaries = {
  John: 100,
  Pete: 300,
  Mary: 250
};

function topSalary(salaries) {
  let arr = Object.entries(salaries);
  let max = 0;
  let maxKey = null;

  for (let [key, value] of arr) {
    if (value > max) {
      max = value;
      maxKey = key;
    }
  }

  return maxKey;
}

let result = topSalary(salaries);
console.log(result);
```

